{
  "version": 4,
  "terraform_version": "1.0.11",
  "serial": 3376,
  "lineage": "4194593c-9b00-d20a-36f5-700586c9ab2f",
  "outputs": {},
  "resources": [
    {
      "module": "module.database",
      "mode": "data",
      "type": "template_cloudinit_config",
      "name": "mariadb_init",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "base64_encode": false,
            "gzip": false,
            "id": "2429443706",
            "part": [
              {
                "content": "#!/bin/bash\n  \nsudo apt update\nsudo apt install mariadb-server -y\n\npassword=\"password\"\nuser=\"username\"\ndbname=\"nextcloud\"\n\nsudo mysql -sfu root \u003c\u003cEOS\n-- set root password\nUPDATE mysql.user SET Password=PASSWORD('$password') WHERE User='root';\n-- delete anonymous users\nDELETE FROM mysql.user WHERE User='';\n-- delete remote root capabilities\nDELETE FROM mysql.user WHERE User='root' AND Host NOT IN ('localhost', '127.0.0.1', '::1');\n-- drop database 'test'\nDROP DATABASE IF EXISTS test;\n-- also make sure there are lingering permissions to it\nDELETE FROM mysql.db WHERE Db='test' OR Db='test\\\\_%';\n-- make changes immediately\nFLUSH PRIVILEGES;\nEOS\n\nQ4=\"CREATE USER '$user'@'localhost' IDENTIFIED BY '$password';\"\nQ5=\"CREATE DATABASE IF NOT EXISTS $dbname CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci;\"\nQ6=\"GRANT ALL PRIVILEGES ON $dbname.* TO '$user'@'localhost' WITH GRANT OPTION;\"\nQ7=\"CREATE USER '$user'@'%' IDENTIFIED BY '$password';\"\nQ8=\"GRANT ALL PRIVILEGES ON *.* TO '$user'@'%' WITH GRANT OPTION;\"\nQ9=\"FLUSH PRIVILEGES;\"\nSQL2=\"$Q4$Q5$Q6$Q7$Q8$Q9\"\n\nMYSQL=`which mysql`\n\nsudo $MYSQL -u root -e \"$SQL2\"\n\nsudo sed -i \"s/.*bind-address.*/bind-address = 0.0.0.0/\" /etc/mysql/mariadb.conf.d/50-server.cnf\n\nsudo systemctl restart mysql",
                "content_type": "text/x-shellscript",
                "filename": "",
                "merge_type": ""
              }
            ],
            "rendered": "Content-Type: multipart/mixed; boundary=\"MIMEBOUNDARY\"\nMIME-Version: 1.0\r\n\r\n--MIMEBOUNDARY\r\nContent-Transfer-Encoding: 7bit\r\nContent-Type: text/x-shellscript\r\nMime-Version: 1.0\r\n\r\n#!/bin/bash\n  \nsudo apt update\nsudo apt install mariadb-server -y\n\npassword=\"password\"\nuser=\"username\"\ndbname=\"nextcloud\"\n\nsudo mysql -sfu root \u003c\u003cEOS\n-- set root password\nUPDATE mysql.user SET Password=PASSWORD('$password') WHERE User='root';\n-- delete anonymous users\nDELETE FROM mysql.user WHERE User='';\n-- delete remote root capabilities\nDELETE FROM mysql.user WHERE User='root' AND Host NOT IN ('localhost', '127.0.0.1', '::1');\n-- drop database 'test'\nDROP DATABASE IF EXISTS test;\n-- also make sure there are lingering permissions to it\nDELETE FROM mysql.db WHERE Db='test' OR Db='test\\\\_%';\n-- make changes immediately\nFLUSH PRIVILEGES;\nEOS\n\nQ4=\"CREATE USER '$user'@'localhost' IDENTIFIED BY '$password';\"\nQ5=\"CREATE DATABASE IF NOT EXISTS $dbname CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci;\"\nQ6=\"GRANT ALL PRIVILEGES ON $dbname.* TO '$user'@'localhost' WITH GRANT OPTION;\"\nQ7=\"CREATE USER '$user'@'%' IDENTIFIED BY '$password';\"\nQ8=\"GRANT ALL PRIVILEGES ON *.* TO '$user'@'%' WITH GRANT OPTION;\"\nQ9=\"FLUSH PRIVILEGES;\"\nSQL2=\"$Q4$Q5$Q6$Q7$Q8$Q9\"\n\nMYSQL=`which mysql`\n\nsudo $MYSQL -u root -e \"$SQL2\"\n\nsudo sed -i \"s/.*bind-address.*/bind-address = 0.0.0.0/\" /etc/mysql/mariadb.conf.d/50-server.cnf\n\nsudo systemctl restart mysql\r\n--MIMEBOUNDARY--\r\n"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.database",
      "mode": "managed",
      "type": "aws_instance",
      "name": "nextcloud_db",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "ami": "ami-0c3904e7363bbc4bc",
            "arn": "arn:aws:ec2:ap-northeast-3:594785396832:instance/i-0e08d6644c57007ac",
            "associate_public_ip_address": false,
            "availability_zone": "ap-northeast-3c",
            "capacity_reservation_specification": [
              {
                "capacity_reservation_preference": "open",
                "capacity_reservation_target": []
              }
            ],
            "cpu_core_count": 1,
            "cpu_threads_per_core": 2,
            "credit_specification": [
              {
                "cpu_credits": "unlimited"
              }
            ],
            "disable_api_termination": false,
            "ebs_block_device": [],
            "ebs_optimized": false,
            "enclave_options": [
              {
                "enabled": false
              }
            ],
            "ephemeral_block_device": [],
            "get_password_data": false,
            "hibernation": false,
            "host_id": null,
            "iam_instance_profile": "",
            "id": "i-0e08d6644c57007ac",
            "instance_initiated_shutdown_behavior": "stop",
            "instance_state": "running",
            "instance_type": "t3.medium",
            "ipv6_address_count": 0,
            "ipv6_addresses": [],
            "key_name": "dev-key",
            "launch_template": [],
            "metadata_options": [
              {
                "http_endpoint": "enabled",
                "http_put_response_hop_limit": 1,
                "http_tokens": "optional"
              }
            ],
            "monitoring": false,
            "network_interface": [
              {
                "delete_on_termination": false,
                "device_index": 0,
                "network_interface_id": "eni-0cf940b41b4ac7149"
              },
              {
                "delete_on_termination": false,
                "device_index": 1,
                "network_interface_id": "eni-07bbe40d0a309533f"
              }
            ],
            "outpost_arn": "",
            "password_data": "",
            "placement_group": "",
            "placement_partition_number": null,
            "primary_network_interface_id": "eni-0cf940b41b4ac7149",
            "private_dns": "ip-10-0-4-243.ap-northeast-3.compute.internal",
            "private_ip": "10.0.4.243",
            "public_dns": "",
            "public_ip": "",
            "root_block_device": [
              {
                "delete_on_termination": true,
                "device_name": "/dev/sda1",
                "encrypted": false,
                "iops": 100,
                "kms_key_id": "",
                "tags": {},
                "throughput": 0,
                "volume_id": "vol-088efc057bbeec141",
                "volume_size": 8,
                "volume_type": "gp2"
              }
            ],
            "secondary_private_ips": [],
            "security_groups": [],
            "source_dest_check": true,
            "subnet_id": "subnet-0c2e43eeace0ec045",
            "tags": {
              "Name": "nextcloud-db"
            },
            "tags_all": {
              "Name": "nextcloud-db"
            },
            "tenancy": "default",
            "timeouts": null,
            "user_data": "f439c691b377740d54ebdb327a6391fcda3a8f4a",
            "user_data_base64": null,
            "volume_tags": null,
            "vpc_security_group_ids": [
              "sg-0c4d501f94290f7ee"
            ]
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMCwidXBkYXRlIjo2MDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "module.database.aws_key_pair.generated_key",
            "module.database.data.template_cloudinit_config.mariadb_init",
            "module.database.tls_private_key.example",
            "module.networking.aws_eip.nat_eip",
            "module.networking.aws_eip.public_eip_nextcloud_app",
            "module.networking.aws_internet_gateway.gw",
            "module.networking.aws_nat_gateway.nextcloud_db_nat",
            "module.networking.aws_network_interface.private_eni_db_app",
            "module.networking.aws_network_interface.private_eni_nextcloud_app",
            "module.networking.aws_network_interface.private_eni_nextcloud_db_nat",
            "module.networking.aws_network_interface.public_eni_nextcloud_app",
            "module.networking.aws_route_table.nextcloud_app_public_rt",
            "module.networking.aws_route_table.nextcloud_db_route_table",
            "module.networking.aws_route_table_association.nextcloud_app_public_rt_assoc",
            "module.networking.aws_route_table_association.nextcloud_db_rt_assoc",
            "module.networking.aws_security_group.nextcloud_db_nat_sg",
            "module.networking.aws_security_group.nextcloud_private_db_app_sg",
            "module.networking.aws_security_group.nextcloud_public_app_sg",
            "module.networking.aws_subnet.nat_public_sn",
            "module.networking.aws_subnet.nextcloud_private_sn_app",
            "module.networking.aws_subnet.nextcloud_private_sn_db",
            "module.networking.aws_subnet.nextcloud_public_sn_app",
            "module.networking.aws_vpc.nextcloud_vpc"
          ]
        }
      ]
    },
    {
      "module": "module.database",
      "mode": "managed",
      "type": "aws_key_pair",
      "name": "generated_key",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:ap-northeast-3:594785396832:key-pair/dev-key",
            "fingerprint": "37:0e:30:86:41:03:13:f5:6b:c4:b0:97:45:88:ce:9f",
            "id": "dev-key",
            "key_name": "dev-key",
            "key_name_prefix": "",
            "key_pair_id": "key-0178c28fd0f6e9c92",
            "public_key": "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQC2+JnntYcgEuoNvXvRwONNn9tkE//xJwDi+2rSEjR9Scs7XbpugXHMiUF/DeUw79zHqIPBEKTQKOSHfHQ0ry2qdyUG1Cr046wEnlYW18hCW07pMIv1IEy2hi+NDwWcWX6S1czdLynK8E/wgVLJkfQoguCvngNJ2LJ4MiYBR0QghT8tHZNIsBJOOKb15/QnbTQ9SChuY/OK34IBXCEMejHLb/75oJqpdU5lbWMHvydwys/zaEF8o323Cj/JYxQOGMoYMLapxjdvMWKGFv0wltneG6CVaGdsyjx5Ju7Y+FR7h4YuLznPk2m9WCL3YLfzV1wTjg1e/Kt/lZ6PIH2VuFKIuj1FeCioHT5hdqMfi+qwHjyFbwi+hS3ky88lQq+f2f43jXtm+5n0RXHnqCOhoaj+eCSELS76NJQfz1Xmd0nsUHM/NkCt6T6GvcCDcEWgXjFNAPAO47OVSk21uFOdk3eIteYtOufhQJezgzBy99PNR+dzGXhuSpCQgRsf5HuPGao5UckGcsgoq3fNBxrZp9B14TLHDZR+JuT0FWnWA5z2XHxjDTfcEenqPbcPjQd0MespcLM7jY+EU0aFgMYXKO52mHpYJcDcoiXvsLdECpH2Fa4rbrp8QXUEnOBKneb9Qv4qYzzjxUJxRVCsCurdDGPtSepQ4tW0mA+9/UTpXFAWlw==",
            "tags": null,
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "module.database.tls_private_key.example",
            "module.networking.aws_eip.nat_eip",
            "module.networking.aws_eip.public_eip_nextcloud_app",
            "module.networking.aws_internet_gateway.gw",
            "module.networking.aws_nat_gateway.nextcloud_db_nat",
            "module.networking.aws_network_interface.private_eni_db_app",
            "module.networking.aws_network_interface.private_eni_nextcloud_app",
            "module.networking.aws_network_interface.private_eni_nextcloud_db_nat",
            "module.networking.aws_network_interface.public_eni_nextcloud_app",
            "module.networking.aws_route_table.nextcloud_app_public_rt",
            "module.networking.aws_route_table.nextcloud_db_route_table",
            "module.networking.aws_route_table_association.nextcloud_app_public_rt_assoc",
            "module.networking.aws_route_table_association.nextcloud_db_rt_assoc",
            "module.networking.aws_security_group.nextcloud_db_nat_sg",
            "module.networking.aws_security_group.nextcloud_private_db_app_sg",
            "module.networking.aws_security_group.nextcloud_public_app_sg",
            "module.networking.aws_subnet.nat_public_sn",
            "module.networking.aws_subnet.nextcloud_private_sn_app",
            "module.networking.aws_subnet.nextcloud_private_sn_db",
            "module.networking.aws_subnet.nextcloud_public_sn_app",
            "module.networking.aws_vpc.nextcloud_vpc"
          ]
        }
      ]
    },
    {
      "module": "module.database",
      "mode": "managed",
      "type": "tls_private_key",
      "name": "example",
      "provider": "provider[\"registry.terraform.io/hashicorp/tls\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "algorithm": "RSA",
            "ecdsa_curve": "P224",
            "id": "664f94cdf39fa5a9bbd52c215989c2e0af351940",
            "private_key_pem": "-----BEGIN RSA PRIVATE KEY-----\n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\n-----END RSA PRIVATE KEY-----\n",
            "public_key_fingerprint_md5": "6d:ee:b4:43:29:f7:23:41:e4:55:91:65:40:07:e9:bb",
            "public_key_openssh": "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQC2+JnntYcgEuoNvXvRwONNn9tkE//xJwDi+2rSEjR9Scs7XbpugXHMiUF/DeUw79zHqIPBEKTQKOSHfHQ0ry2qdyUG1Cr046wEnlYW18hCW07pMIv1IEy2hi+NDwWcWX6S1czdLynK8E/wgVLJkfQoguCvngNJ2LJ4MiYBR0QghT8tHZNIsBJOOKb15/QnbTQ9SChuY/OK34IBXCEMejHLb/75oJqpdU5lbWMHvydwys/zaEF8o323Cj/JYxQOGMoYMLapxjdvMWKGFv0wltneG6CVaGdsyjx5Ju7Y+FR7h4YuLznPk2m9WCL3YLfzV1wTjg1e/Kt/lZ6PIH2VuFKIuj1FeCioHT5hdqMfi+qwHjyFbwi+hS3ky88lQq+f2f43jXtm+5n0RXHnqCOhoaj+eCSELS76NJQfz1Xmd0nsUHM/NkCt6T6GvcCDcEWgXjFNAPAO47OVSk21uFOdk3eIteYtOufhQJezgzBy99PNR+dzGXhuSpCQgRsf5HuPGao5UckGcsgoq3fNBxrZp9B14TLHDZR+JuT0FWnWA5z2XHxjDTfcEenqPbcPjQd0MespcLM7jY+EU0aFgMYXKO52mHpYJcDcoiXvsLdECpH2Fa4rbrp8QXUEnOBKneb9Qv4qYzzjxUJxRVCsCurdDGPtSepQ4tW0mA+9/UTpXFAWlw==\n",
            "public_key_pem": "-----BEGIN PUBLIC KEY-----\nMIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEAtviZ57WHIBLqDb170cDj\nTZ/bZBP/8ScA4vtq0hI0fUnLO126boFxzIlBfw3lMO/cx6iDwRCk0Cjkh3x0NK8t\nqnclBtQq9OOsBJ5WFtfIQltO6TCL9SBMtoYvjQ8FnFl+ktXM3S8pyvBP8IFSyZH0\nKILgr54DSdiyeDImAUdEIIU/LR2TSLASTjim9ef0J200PUgobmPzit+CAVwhDHox\ny2/++aCaqXVOZW1jB78ncMrP82hBfKN9two/yWMUDhjKGDC2qcY3bzFihhb9MJbZ\n3huglWhnbMo8eSbu2PhUe4eGLi85z5NpvVgi92C381dcE44NXvyrf5WejyB9lbhS\niLo9RXgoqB0+YXajH4vqsB48hW8IvoUt5MvPJUKvn9n+N417ZvuZ9EVx56gjoaGo\n/ngkhC0u+jSUH89V5ndJ7FBzPzZArek+hr3Ag3BFoF4xTQDwDuOzlUpNtbhTnZN3\niLXmLTrn4UCXs4MwcvfTzUfncxl4bkqQkIEbH+R7jxmqOVHJBnLIKKt3zQca2afQ\ndeEyxw2Ufibk9BVp1gOc9lx8Yw033BHp6j23D40HdDHrKXCzO42PhFNGhYDGFyju\ndph6WCXA3KIl77C3RAqR9hWuK266fEF1BJzgSp3m/UL+KmM848VCcUVQrArq3Qxj\n7UnqUOLVtJgPvf1E6VxQFpcCAwEAAQ==\n-----END PUBLIC KEY-----\n",
            "rsa_bits": 4096
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.networking.aws_eip.nat_eip",
            "module.networking.aws_eip.public_eip_nextcloud_app",
            "module.networking.aws_internet_gateway.gw",
            "module.networking.aws_nat_gateway.nextcloud_db_nat",
            "module.networking.aws_network_interface.private_eni_db_app",
            "module.networking.aws_network_interface.private_eni_nextcloud_app",
            "module.networking.aws_network_interface.private_eni_nextcloud_db_nat",
            "module.networking.aws_network_interface.public_eni_nextcloud_app",
            "module.networking.aws_route_table.nextcloud_app_public_rt",
            "module.networking.aws_route_table.nextcloud_db_route_table",
            "module.networking.aws_route_table_association.nextcloud_app_public_rt_assoc",
            "module.networking.aws_route_table_association.nextcloud_db_rt_assoc",
            "module.networking.aws_security_group.nextcloud_db_nat_sg",
            "module.networking.aws_security_group.nextcloud_private_db_app_sg",
            "module.networking.aws_security_group.nextcloud_public_app_sg",
            "module.networking.aws_subnet.nat_public_sn",
            "module.networking.aws_subnet.nextcloud_private_sn_app",
            "module.networking.aws_subnet.nextcloud_private_sn_db",
            "module.networking.aws_subnet.nextcloud_public_sn_app",
            "module.networking.aws_vpc.nextcloud_vpc"
          ]
        }
      ]
    },
    {
      "module": "module.iam",
      "mode": "data",
      "type": "aws_caller_identity",
      "name": "terraform_user",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "account_id": "594785396832",
            "arn": "arn:aws:iam::594785396832:user/notsendo",
            "id": "594785396832",
            "user_id": "AIDAYU67Y5BQGDD2DXIYV"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.iam",
      "mode": "managed",
      "type": "aws_iam_access_key",
      "name": "nextcloud-s3-access_key",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "create_date": "2021-11-23T10:13:00Z",
            "encrypted_secret": null,
            "encrypted_ses_smtp_password_v4": null,
            "id": "AKIAYU67Y5BQDZV6G2EE",
            "key_fingerprint": null,
            "pgp_key": null,
            "secret": "FHQIIwThjq27WYHrk09psOO5oQnjeAZl8NeWq66n",
            "ses_smtp_password_v4": "BPpErYS1MxBAOiBq2GvgqYLdC0et3hLyFpen8pCJjUaB",
            "status": "Active",
            "user": "terraform-nextcloud-s3"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam.aws_iam_user.nextcloud-s3"
          ]
        }
      ]
    },
    {
      "module": "module.iam",
      "mode": "managed",
      "type": "aws_iam_user",
      "name": "nextcloud-s3",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::594785396832:user/terraform-nextcloud-s3",
            "force_destroy": false,
            "id": "terraform-nextcloud-s3",
            "name": "terraform-nextcloud-s3",
            "path": "/",
            "permissions_boundary": null,
            "tags": null,
            "tags_all": {},
            "unique_id": "AIDAYU67Y5BQMG62KMDDD"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.networking",
      "mode": "managed",
      "type": "aws_eip",
      "name": "nat_eip",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "address": null,
            "allocation_id": "eipalloc-0a5b3f4103bad454c",
            "associate_with_private_ip": null,
            "association_id": "",
            "carrier_ip": "",
            "customer_owned_ip": "",
            "customer_owned_ipv4_pool": "",
            "domain": "vpc",
            "id": "eipalloc-0a5b3f4103bad454c",
            "instance": "",
            "network_border_group": "ap-northeast-3",
            "network_interface": "",
            "private_dns": null,
            "private_ip": "",
            "public_dns": "ec2-13-208-135-87.ap-northeast-3.compute.amazonaws.com",
            "public_ip": "13.208.135.87",
            "public_ipv4_pool": "amazon",
            "tags": {
              "Name": "NAT eip"
            },
            "tags_all": {
              "Name": "NAT eip"
            },
            "timeouts": null,
            "vpc": true
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiZGVsZXRlIjoxODAwMDAwMDAwMDAsInJlYWQiOjkwMDAwMDAwMDAwMCwidXBkYXRlIjozMDAwMDAwMDAwMDB9fQ=="
        }
      ]
    },
    {
      "module": "module.networking",
      "mode": "managed",
      "type": "aws_eip",
      "name": "public_eip_nextcloud_app",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "address": null,
            "allocation_id": "eipalloc-00e2dcd440d680576",
            "associate_with_private_ip": "10.0.1.5",
            "association_id": "eipassoc-0fddc41babf558614",
            "carrier_ip": "",
            "customer_owned_ip": "",
            "customer_owned_ipv4_pool": "",
            "domain": "vpc",
            "id": "eipalloc-00e2dcd440d680576",
            "instance": "",
            "network_border_group": "ap-northeast-3",
            "network_interface": "eni-0527e9c905e338284",
            "private_dns": "ip-10-0-1-5.ap-northeast-3.compute.internal",
            "private_ip": "10.0.1.5",
            "public_dns": "ec2-15-152-83-222.ap-northeast-3.compute.amazonaws.com",
            "public_ip": "15.152.83.222",
            "public_ipv4_pool": "amazon",
            "tags": {
              "Name": "public_eip_nextcloud_app"
            },
            "tags_all": {
              "Name": "public_eip_nextcloud_app"
            },
            "timeouts": null,
            "vpc": true
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiZGVsZXRlIjoxODAwMDAwMDAwMDAsInJlYWQiOjkwMDAwMDAwMDAwMCwidXBkYXRlIjozMDAwMDAwMDAwMDB9fQ==",
          "dependencies": [
            "module.networking.aws_internet_gateway.gw",
            "module.networking.aws_network_interface.public_eni_nextcloud_app",
            "module.networking.aws_security_group.nextcloud_public_app_sg",
            "module.networking.aws_subnet.nextcloud_public_sn_app",
            "module.networking.aws_vpc.nextcloud_vpc"
          ]
        }
      ]
    },
    {
      "module": "module.networking",
      "mode": "managed",
      "type": "aws_internet_gateway",
      "name": "gw",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ec2:ap-northeast-3:594785396832:internet-gateway/igw-0642a5f1fb365fa87",
            "id": "igw-0642a5f1fb365fa87",
            "owner_id": "594785396832",
            "tags": {
              "Name": "nextcloud_gateway"
            },
            "tags_all": {
              "Name": "nextcloud_gateway"
            },
            "vpc_id": "vpc-0b63c149b9f09d399"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.networking.aws_vpc.nextcloud_vpc"
          ]
        }
      ]
    },
    {
      "module": "module.networking",
      "mode": "managed",
      "type": "aws_nat_gateway",
      "name": "nextcloud_db_nat",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "allocation_id": "eipalloc-0a5b3f4103bad454c",
            "connectivity_type": "public",
            "id": "nat-0546b04f15186ee4f",
            "network_interface_id": "eni-01fd206cbc56b025e",
            "private_ip": "10.0.1.103",
            "public_ip": "13.208.135.87",
            "subnet_id": "subnet-08cf1db4297937d95",
            "tags": {
              "Name": "Nextcloud DB NAT"
            },
            "tags_all": {
              "Name": "Nextcloud DB NAT"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.networking.aws_eip.nat_eip",
            "module.networking.aws_internet_gateway.gw",
            "module.networking.aws_subnet.nextcloud_public_sn_app",
            "module.networking.aws_vpc.nextcloud_vpc"
          ]
        }
      ]
    },
    {
      "module": "module.networking",
      "mode": "managed",
      "type": "aws_network_interface",
      "name": "private_eni_db_app",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ec2:ap-northeast-3:594785396832:network-interface/eni-07bbe40d0a309533f",
            "attachment": [],
            "description": "",
            "id": "eni-07bbe40d0a309533f",
            "interface_type": "interface",
            "ipv4_prefix_count": 0,
            "ipv4_prefixes": [],
            "ipv6_address_count": 0,
            "ipv6_addresses": [],
            "ipv6_prefix_count": 0,
            "ipv6_prefixes": [],
            "mac_address": "0a:c5:5d:5f:73:0a",
            "outpost_arn": "",
            "owner_id": "594785396832",
            "private_dns_name": "ip-10-0-2-7.ap-northeast-3.compute.internal",
            "private_ip": "10.0.2.7",
            "private_ips": [
              "10.0.2.7"
            ],
            "private_ips_count": 0,
            "security_groups": [
              "sg-0f208e5ac7ee4fd48"
            ],
            "source_dest_check": true,
            "subnet_id": "subnet-017f7d2f3310871f8",
            "tags": {
              "Name": "private eni database to nextcloud app"
            },
            "tags_all": {
              "Name": "private eni database to nextcloud app"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.networking.aws_security_group.nextcloud_private_db_app_sg",
            "module.networking.aws_subnet.nextcloud_private_sn_app",
            "module.networking.aws_vpc.nextcloud_vpc"
          ]
        }
      ]
    },
    {
      "module": "module.networking",
      "mode": "managed",
      "type": "aws_network_interface",
      "name": "private_eni_nextcloud_app",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ec2:ap-northeast-3:594785396832:network-interface/eni-0b13fa18ebe39b177",
            "attachment": [],
            "description": "",
            "id": "eni-0b13fa18ebe39b177",
            "interface_type": "interface",
            "ipv4_prefix_count": 0,
            "ipv4_prefixes": [],
            "ipv6_address_count": 0,
            "ipv6_addresses": [],
            "ipv6_prefix_count": 0,
            "ipv6_prefixes": [],
            "mac_address": "0a:47:a6:1f:e0:98",
            "outpost_arn": "",
            "owner_id": "594785396832",
            "private_dns_name": "ip-10-0-2-6.ap-northeast-3.compute.internal",
            "private_ip": "10.0.2.6",
            "private_ips": [
              "10.0.2.6"
            ],
            "private_ips_count": 0,
            "security_groups": [
              "sg-0f208e5ac7ee4fd48"
            ],
            "source_dest_check": true,
            "subnet_id": "subnet-017f7d2f3310871f8",
            "tags": {
              "Name": "private eni nextcloud app"
            },
            "tags_all": {
              "Name": "private eni nextcloud app"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.networking.aws_security_group.nextcloud_private_db_app_sg",
            "module.networking.aws_subnet.nextcloud_private_sn_app",
            "module.networking.aws_vpc.nextcloud_vpc"
          ]
        }
      ]
    },
    {
      "module": "module.networking",
      "mode": "managed",
      "type": "aws_network_interface",
      "name": "private_eni_nextcloud_db_nat",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ec2:ap-northeast-3:594785396832:network-interface/eni-0cf940b41b4ac7149",
            "attachment": [],
            "description": "",
            "id": "eni-0cf940b41b4ac7149",
            "interface_type": "interface",
            "ipv4_prefix_count": 0,
            "ipv4_prefixes": [],
            "ipv6_address_count": 0,
            "ipv6_addresses": [],
            "ipv6_prefix_count": 0,
            "ipv6_prefixes": [],
            "mac_address": "0a:4f:0c:0c:57:16",
            "outpost_arn": "",
            "owner_id": "594785396832",
            "private_dns_name": "ip-10-0-4-243.ap-northeast-3.compute.internal",
            "private_ip": "10.0.4.243",
            "private_ips": [
              "10.0.4.243"
            ],
            "private_ips_count": 0,
            "security_groups": [
              "sg-0c4d501f94290f7ee"
            ],
            "source_dest_check": true,
            "subnet_id": "subnet-0c2e43eeace0ec045",
            "tags": {
              "Name": "private eni nextcloud db nat"
            },
            "tags_all": {
              "Name": "private eni nextcloud db nat"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.networking.aws_security_group.nextcloud_db_nat_sg",
            "module.networking.aws_subnet.nextcloud_private_sn_db",
            "module.networking.aws_vpc.nextcloud_vpc"
          ]
        }
      ]
    },
    {
      "module": "module.networking",
      "mode": "managed",
      "type": "aws_network_interface",
      "name": "public_eni_nextcloud_app",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ec2:ap-northeast-3:594785396832:network-interface/eni-0527e9c905e338284",
            "attachment": [],
            "description": "",
            "id": "eni-0527e9c905e338284",
            "interface_type": "interface",
            "ipv4_prefix_count": 0,
            "ipv4_prefixes": [],
            "ipv6_address_count": 0,
            "ipv6_addresses": [],
            "ipv6_prefix_count": 0,
            "ipv6_prefixes": [],
            "mac_address": "0a:19:ef:9e:ae:36",
            "outpost_arn": "",
            "owner_id": "594785396832",
            "private_dns_name": "ip-10-0-1-5.ap-northeast-3.compute.internal",
            "private_ip": "10.0.1.5",
            "private_ips": [
              "10.0.1.5"
            ],
            "private_ips_count": 0,
            "security_groups": [
              "sg-0e820d21e1ea4576d"
            ],
            "source_dest_check": true,
            "subnet_id": "subnet-08cf1db4297937d95",
            "tags": {
              "Name": "publuc eni nextcloud app"
            },
            "tags_all": {
              "Name": "publuc eni nextcloud app"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.networking.aws_security_group.nextcloud_public_app_sg",
            "module.networking.aws_subnet.nextcloud_public_sn_app",
            "module.networking.aws_vpc.nextcloud_vpc"
          ]
        }
      ]
    },
    {
      "module": "module.networking",
      "mode": "managed",
      "type": "aws_route_table",
      "name": "nextcloud_app_public_rt",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ec2:ap-northeast-3:594785396832:route-table/rtb-0fcf7dd06392b5999",
            "id": "rtb-0fcf7dd06392b5999",
            "owner_id": "594785396832",
            "propagating_vgws": [],
            "route": [
              {
                "carrier_gateway_id": "",
                "cidr_block": "0.0.0.0/0",
                "destination_prefix_list_id": "",
                "egress_only_gateway_id": "",
                "gateway_id": "igw-0642a5f1fb365fa87",
                "instance_id": "",
                "ipv6_cidr_block": "",
                "local_gateway_id": "",
                "nat_gateway_id": "",
                "network_interface_id": "",
                "transit_gateway_id": "",
                "vpc_endpoint_id": "",
                "vpc_peering_connection_id": ""
              }
            ],
            "tags": {
              "Name": "nextcloud_public_app_rt"
            },
            "tags_all": {
              "Name": "nextcloud_public_app_rt"
            },
            "timeouts": null,
            "vpc_id": "vpc-0b63c149b9f09d399"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAsImRlbGV0ZSI6MzAwMDAwMDAwMDAwLCJ1cGRhdGUiOjEyMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.networking.aws_internet_gateway.gw",
            "module.networking.aws_vpc.nextcloud_vpc"
          ]
        }
      ]
    },
    {
      "module": "module.networking",
      "mode": "managed",
      "type": "aws_route_table",
      "name": "nextcloud_db_route_table",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ec2:ap-northeast-3:594785396832:route-table/rtb-0215b6206b50d858c",
            "id": "rtb-0215b6206b50d858c",
            "owner_id": "594785396832",
            "propagating_vgws": [],
            "route": [
              {
                "carrier_gateway_id": "",
                "cidr_block": "0.0.0.0/0",
                "destination_prefix_list_id": "",
                "egress_only_gateway_id": "",
                "gateway_id": "",
                "instance_id": "",
                "ipv6_cidr_block": "",
                "local_gateway_id": "",
                "nat_gateway_id": "nat-0546b04f15186ee4f",
                "network_interface_id": "",
                "transit_gateway_id": "",
                "vpc_endpoint_id": "",
                "vpc_peering_connection_id": ""
              }
            ],
            "tags": {
              "Name": "nextcloud_db_route_table"
            },
            "tags_all": {
              "Name": "nextcloud_db_route_table"
            },
            "timeouts": null,
            "vpc_id": "vpc-0b63c149b9f09d399"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAsImRlbGV0ZSI6MzAwMDAwMDAwMDAwLCJ1cGRhdGUiOjEyMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.networking.aws_eip.nat_eip",
            "module.networking.aws_internet_gateway.gw",
            "module.networking.aws_nat_gateway.nextcloud_db_nat",
            "module.networking.aws_subnet.nextcloud_public_sn_app",
            "module.networking.aws_vpc.nextcloud_vpc"
          ]
        }
      ]
    },
    {
      "module": "module.networking",
      "mode": "managed",
      "type": "aws_route_table_association",
      "name": "nextcloud_app_public_rt_assoc",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "gateway_id": "",
            "id": "rtbassoc-07ae8ecd83c8921b8",
            "route_table_id": "rtb-0fcf7dd06392b5999",
            "subnet_id": "subnet-08cf1db4297937d95"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.networking.aws_internet_gateway.gw",
            "module.networking.aws_route_table.nextcloud_app_public_rt",
            "module.networking.aws_subnet.nextcloud_public_sn_app",
            "module.networking.aws_vpc.nextcloud_vpc"
          ]
        }
      ]
    },
    {
      "module": "module.networking",
      "mode": "managed",
      "type": "aws_route_table_association",
      "name": "nextcloud_db_rt_assoc",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "gateway_id": "",
            "id": "rtbassoc-0368f0e1353213c98",
            "route_table_id": "rtb-0215b6206b50d858c",
            "subnet_id": "subnet-0c2e43eeace0ec045"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.networking.aws_eip.nat_eip",
            "module.networking.aws_internet_gateway.gw",
            "module.networking.aws_nat_gateway.nextcloud_db_nat",
            "module.networking.aws_route_table.nextcloud_db_route_table",
            "module.networking.aws_subnet.nextcloud_private_sn_db",
            "module.networking.aws_subnet.nextcloud_public_sn_app",
            "module.networking.aws_vpc.nextcloud_vpc"
          ]
        }
      ]
    },
    {
      "module": "module.networking",
      "mode": "managed",
      "type": "aws_security_group",
      "name": "nextcloud_db_nat_sg",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:ap-northeast-3:594785396832:security-group/sg-0c4d501f94290f7ee",
            "description": "Managed by Terraform",
            "egress": [
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "",
                "from_port": 0,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "-1",
                "security_groups": [],
                "self": false,
                "to_port": 0
              }
            ],
            "id": "sg-0c4d501f94290f7ee",
            "ingress": [
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "",
                "from_port": -1,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "icmp",
                "security_groups": [],
                "self": false,
                "to_port": -1
              },
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "",
                "from_port": 0,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "-1",
                "security_groups": [],
                "self": false,
                "to_port": 0
              }
            ],
            "name": "terraform-20211123101315164600000001",
            "name_prefix": "terraform-",
            "owner_id": "594785396832",
            "revoke_rules_on_delete": false,
            "tags": {
              "Name": "Nextcloud db nat sg"
            },
            "tags_all": {
              "Name": "Nextcloud db nat sg"
            },
            "timeouts": null,
            "vpc_id": "vpc-0b63c149b9f09d399"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6OTAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "dependencies": [
            "module.networking.aws_vpc.nextcloud_vpc"
          ],
          "create_before_destroy": true
        }
      ]
    },
    {
      "module": "module.networking",
      "mode": "managed",
      "type": "aws_security_group",
      "name": "nextcloud_private_db_app_sg",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:ap-northeast-3:594785396832:security-group/sg-0f208e5ac7ee4fd48",
            "description": "Managed by Terraform",
            "egress": [
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "",
                "from_port": 0,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "-1",
                "security_groups": [],
                "self": false,
                "to_port": 0
              }
            ],
            "id": "sg-0f208e5ac7ee4fd48",
            "ingress": [
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "",
                "from_port": 22,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 22
              },
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "",
                "from_port": 3306,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 3306
              }
            ],
            "name": "nextcloud_private_db_app_sg",
            "name_prefix": "",
            "owner_id": "594785396832",
            "revoke_rules_on_delete": false,
            "tags": {
              "Name": "Nextcloud private db app sg"
            },
            "tags_all": {
              "Name": "Nextcloud private db app sg"
            },
            "timeouts": null,
            "vpc_id": "vpc-0b63c149b9f09d399"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6OTAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "dependencies": [
            "module.networking.aws_vpc.nextcloud_vpc"
          ],
          "create_before_destroy": true
        }
      ]
    },
    {
      "module": "module.networking",
      "mode": "managed",
      "type": "aws_security_group",
      "name": "nextcloud_public_app_sg",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:ap-northeast-3:594785396832:security-group/sg-0e820d21e1ea4576d",
            "description": "Managed by Terraform",
            "egress": [
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "",
                "from_port": 0,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "-1",
                "security_groups": [],
                "self": false,
                "to_port": 0
              }
            ],
            "id": "sg-0e820d21e1ea4576d",
            "ingress": [
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "",
                "from_port": 22,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 22
              },
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "",
                "from_port": 3306,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 3306
              },
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "",
                "from_port": 80,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 80
              }
            ],
            "name": "nextcloud_public_app_sg",
            "name_prefix": "",
            "owner_id": "594785396832",
            "revoke_rules_on_delete": false,
            "tags": {
              "Name": "Nextcloud public app sg"
            },
            "tags_all": {
              "Name": "Nextcloud public app sg"
            },
            "timeouts": null,
            "vpc_id": "vpc-0b63c149b9f09d399"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6OTAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "dependencies": [
            "module.networking.aws_vpc.nextcloud_vpc"
          ],
          "create_before_destroy": true
        }
      ]
    },
    {
      "module": "module.networking",
      "mode": "managed",
      "type": "aws_subnet",
      "name": "nat_public_sn",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:ap-northeast-3:594785396832:subnet/subnet-0ca7248aa2ced4eb0",
            "assign_ipv6_address_on_creation": false,
            "availability_zone": "ap-northeast-3c",
            "availability_zone_id": "apne3-az2",
            "cidr_block": "10.0.5.0/24",
            "customer_owned_ipv4_pool": "",
            "id": "subnet-0ca7248aa2ced4eb0",
            "ipv6_cidr_block": "",
            "ipv6_cidr_block_association_id": "",
            "map_customer_owned_ip_on_launch": false,
            "map_public_ip_on_launch": false,
            "outpost_arn": "",
            "owner_id": "594785396832",
            "tags": {
              "Name": "Nat gatway subnet public"
            },
            "tags_all": {
              "Name": "Nat gatway subnet public"
            },
            "timeouts": null,
            "vpc_id": "vpc-0b63c149b9f09d399"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "module.networking.aws_vpc.nextcloud_vpc"
          ]
        }
      ]
    },
    {
      "module": "module.networking",
      "mode": "managed",
      "type": "aws_subnet",
      "name": "nextcloud_private_sn_app",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:ap-northeast-3:594785396832:subnet/subnet-017f7d2f3310871f8",
            "assign_ipv6_address_on_creation": false,
            "availability_zone": "ap-northeast-3c",
            "availability_zone_id": "apne3-az2",
            "cidr_block": "10.0.2.0/24",
            "customer_owned_ipv4_pool": "",
            "id": "subnet-017f7d2f3310871f8",
            "ipv6_cidr_block": "",
            "ipv6_cidr_block_association_id": "",
            "map_customer_owned_ip_on_launch": false,
            "map_public_ip_on_launch": false,
            "outpost_arn": "",
            "owner_id": "594785396832",
            "tags": {
              "Name": "Nextcloud app private subnet"
            },
            "tags_all": {
              "Name": "Nextcloud app private subnet"
            },
            "timeouts": null,
            "vpc_id": "vpc-0b63c149b9f09d399"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "module.networking.aws_vpc.nextcloud_vpc"
          ]
        }
      ]
    },
    {
      "module": "module.networking",
      "mode": "managed",
      "type": "aws_subnet",
      "name": "nextcloud_private_sn_db",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:ap-northeast-3:594785396832:subnet/subnet-0c2e43eeace0ec045",
            "assign_ipv6_address_on_creation": false,
            "availability_zone": "ap-northeast-3c",
            "availability_zone_id": "apne3-az2",
            "cidr_block": "10.0.4.0/24",
            "customer_owned_ipv4_pool": "",
            "id": "subnet-0c2e43eeace0ec045",
            "ipv6_cidr_block": "",
            "ipv6_cidr_block_association_id": "",
            "map_customer_owned_ip_on_launch": false,
            "map_public_ip_on_launch": false,
            "outpost_arn": "",
            "owner_id": "594785396832",
            "tags": {
              "Name": "Nextcloud db private subnet"
            },
            "tags_all": {
              "Name": "Nextcloud db private subnet"
            },
            "timeouts": null,
            "vpc_id": "vpc-0b63c149b9f09d399"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "module.networking.aws_vpc.nextcloud_vpc"
          ]
        }
      ]
    },
    {
      "module": "module.networking",
      "mode": "managed",
      "type": "aws_subnet",
      "name": "nextcloud_public_sn_app",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:ap-northeast-3:594785396832:subnet/subnet-08cf1db4297937d95",
            "assign_ipv6_address_on_creation": false,
            "availability_zone": "ap-northeast-3c",
            "availability_zone_id": "apne3-az2",
            "cidr_block": "10.0.1.0/24",
            "customer_owned_ipv4_pool": "",
            "id": "subnet-08cf1db4297937d95",
            "ipv6_cidr_block": "",
            "ipv6_cidr_block_association_id": "",
            "map_customer_owned_ip_on_launch": false,
            "map_public_ip_on_launch": false,
            "outpost_arn": "",
            "owner_id": "594785396832",
            "tags": {
              "Name": "Nextcloud app public subnet"
            },
            "tags_all": {
              "Name": "Nextcloud app public subnet"
            },
            "timeouts": null,
            "vpc_id": "vpc-0b63c149b9f09d399"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "module.networking.aws_vpc.nextcloud_vpc"
          ]
        }
      ]
    },
    {
      "module": "module.networking",
      "mode": "managed",
      "type": "aws_vpc",
      "name": "nextcloud_vpc",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:ap-northeast-3:594785396832:vpc/vpc-0b63c149b9f09d399",
            "assign_generated_ipv6_cidr_block": false,
            "cidr_block": "10.0.0.0/16",
            "default_network_acl_id": "acl-0015795a9604eb501",
            "default_route_table_id": "rtb-0dbd76481c8ecaa22",
            "default_security_group_id": "sg-0a2867a4d6aa1e167",
            "dhcp_options_id": "dopt-a80643c1",
            "enable_classiclink": null,
            "enable_classiclink_dns_support": null,
            "enable_dns_hostnames": true,
            "enable_dns_support": true,
            "id": "vpc-0b63c149b9f09d399",
            "instance_tenancy": "default",
            "ipv6_association_id": "",
            "ipv6_cidr_block": "",
            "main_route_table_id": "rtb-0dbd76481c8ecaa22",
            "owner_id": "594785396832",
            "tags": {
              "Name": "next_cloud_vpc"
            },
            "tags_all": {
              "Name": "next_cloud_vpc"
            }
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "create_before_destroy": true
        }
      ]
    },
    {
      "module": "module.nextcloud",
      "mode": "data",
      "type": "template_cloudinit_config",
      "name": "cloudinit-nextcloud",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "base64_encode": false,
            "gzip": false,
            "id": "2789418248",
            "part": [
              {
                "content": "#!/bin/bash\r\n\r\n# Install dependencies\r\nsudo apt-get update\r\nsudo apt-get install -y apache2 mariadb-server libapache2-mod-php\r\nsudo apt-get install -y php-gd php-json php-mysql php-curl php-mbstring\r\nsudo apt-get install -y php-intl php-imagick php-xml php-zip\r\n\r\n# Download and unpack Nextcloud\r\nwget https://download.nextcloud.com/server/releases/latest.tar.bz2\r\ntar -xjf latest.tar.bz2",
                "content_type": "text/x-shellscript",
                "filename": "",
                "merge_type": ""
              },
              {
                "content": "#!/bin/bash\r\n\r\n# RDS config\r\ncat \u003c\u003c EOF \u003e nextcloud/config/autoconfig.php\r\n\u003c?php\r\n\\$AUTOCONFIG = array(\r\n  \"dbtype\"        =\u003e \"mysql\",\r\n  \"dbname\"        =\u003e \"nextcloud\",\r\n  \"dbuser\"        =\u003e \"username\",\r\n  \"dbpass\"        =\u003e \"password\",\r\n  \"dbhost\"        =\u003e \"10.0.4.243\",\r\n  \"dbtableprefix\" =\u003e \"\",\r\n  \"adminlogin\"    =\u003e \"admin\",\r\n  \"adminpass\"     =\u003e \"admin\",\r\n  \"directory\"     =\u003e \"/var/www/nextcloud/data\",\r\n);\r\nEOF",
                "content_type": "text/x-shellscript",
                "filename": "",
                "merge_type": ""
              },
              {
                "content": "#!/bin/bash\r\n\r\n# S3 config\r\ncat \u003c\u003c EOF \u003e ./nextcloud/config/storage.config.php\r\n\u003c?php\r\n\\$CONFIG = array (\r\n  \"objectstore\" =\u003e array( \r\n      \"class\" =\u003e \"OC\\\\Files\\\\ObjectStore\\\\S3\",\r\n      \"arguments\" =\u003e array(\r\n        \"autocreate\" =\u003e false,\r\n        \"bucket\" =\u003e \"testbucker-38123\",\r\n        \"key\"    =\u003e \"AKIAYU67Y5BQDZV6G2EE\",\r\n        \"secret\" =\u003e \"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\",\r\n        \"use_ssl\" =\u003e true,\r\n        \"region\" =\u003e \"ap-northeast-3\"\r\n      ),\r\n    ),\r\n  );\r\nEOF",
                "content_type": "text/x-shellscript",
                "filename": "",
                "merge_type": ""
              },
              {
                "content": "#!/bin/bash\r\n\r\ncat \u003c\u003c EOF \u003e /etc/apache2/sites-available/nextcloud.conf\r\n\u003cVirtualHost *:80\u003e\r\n\r\n  DocumentRoot /var/www/nextcloud\r\n\r\n  \u003cDirectory /var/www/nextcloud/\u003e\r\n    Require all granted\r\n    Options FollowSymlinks MultiViews\r\n    AllowOverride All\r\n\r\n    \u003cIfModule mod_dav.c\u003e\r\n      Dav off\r\n    \u003c/IfModule\u003e\r\n\r\n    SetEnv HOME /var/www/nextcloud\r\n    SetEnv HTTP_HOME /var/www/nextcloud\r\n\r\n  \u003c/Directory\u003e\r\n\r\n  ErrorLog  /var/log/apache2/nextcloud_error.log\r\n  CustomLog /var/log/apache2/nextcloud_access.log combined\r\n\r\n\u003c/VirtualHost\u003e\r\nEOF",
                "content_type": "text/x-shellscript",
                "filename": "",
                "merge_type": ""
              },
              {
                "content": "#!/bin/bash\r\n\r\n# Move nextcloud to its final destination and set permissions\r\nchown -R www-data:www-data nextcloud/\r\nmv nextcloud/ /var/www\r\n\r\n\r\n# Enable Apache modules. Replace default site\r\na2enmod rewrite\r\na2enmod headers\r\na2enmod env\r\na2enmod dir\r\na2enmod mime\r\n\r\na2dissite 000-default\r\na2ensite nextcloud\r\nsystemctl reload apache2",
                "content_type": "text/x-shellscript",
                "filename": "",
                "merge_type": ""
              }
            ],
            "rendered": "Content-Type: multipart/mixed; boundary=\"MIMEBOUNDARY\"\nMIME-Version: 1.0\r\n\r\n--MIMEBOUNDARY\r\nContent-Transfer-Encoding: 7bit\r\nContent-Type: text/x-shellscript\r\nMime-Version: 1.0\r\n\r\n#!/bin/bash\r\n\r\n# Install dependencies\r\nsudo apt-get update\r\nsudo apt-get install -y apache2 mariadb-server libapache2-mod-php\r\nsudo apt-get install -y php-gd php-json php-mysql php-curl php-mbstring\r\nsudo apt-get install -y php-intl php-imagick php-xml php-zip\r\n\r\n# Download and unpack Nextcloud\r\nwget https://download.nextcloud.com/server/releases/latest.tar.bz2\r\ntar -xjf latest.tar.bz2\r\n--MIMEBOUNDARY\r\nContent-Transfer-Encoding: 7bit\r\nContent-Type: text/x-shellscript\r\nMime-Version: 1.0\r\n\r\n#!/bin/bash\r\n\r\n# RDS config\r\ncat \u003c\u003c EOF \u003e nextcloud/config/autoconfig.php\r\n\u003c?php\r\n\\$AUTOCONFIG = array(\r\n  \"dbtype\"        =\u003e \"mysql\",\r\n  \"dbname\"        =\u003e \"nextcloud\",\r\n  \"dbuser\"        =\u003e \"username\",\r\n  \"dbpass\"        =\u003e \"password\",\r\n  \"dbhost\"        =\u003e \"10.0.4.243\",\r\n  \"dbtableprefix\" =\u003e \"\",\r\n  \"adminlogin\"    =\u003e \"admin\",\r\n  \"adminpass\"     =\u003e \"admin\",\r\n  \"directory\"     =\u003e \"/var/www/nextcloud/data\",\r\n);\r\nEOF\r\n--MIMEBOUNDARY\r\nContent-Transfer-Encoding: 7bit\r\nContent-Type: text/x-shellscript\r\nMime-Version: 1.0\r\n\r\n#!/bin/bash\r\n\r\n# S3 config\r\ncat \u003c\u003c EOF \u003e ./nextcloud/config/storage.config.php\r\n\u003c?php\r\n\\$CONFIG = array (\r\n  \"objectstore\" =\u003e array( \r\n      \"class\" =\u003e \"OC\\\\Files\\\\ObjectStore\\\\S3\",\r\n      \"arguments\" =\u003e array(\r\n        \"autocreate\" =\u003e false,\r\n        \"bucket\" =\u003e \"testbucker-38123\",\r\n        \"key\"    =\u003e \"AKIAYU67Y5BQDZV6G2EE\",\r\n        \"secret\" =\u003e \"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\",\r\n        \"use_ssl\" =\u003e true,\r\n        \"region\" =\u003e \"ap-northeast-3\"\r\n      ),\r\n    ),\r\n  );\r\nEOF\r\n--MIMEBOUNDARY\r\nContent-Transfer-Encoding: 7bit\r\nContent-Type: text/x-shellscript\r\nMime-Version: 1.0\r\n\r\n#!/bin/bash\r\n\r\ncat \u003c\u003c EOF \u003e /etc/apache2/sites-available/nextcloud.conf\r\n\u003cVirtualHost *:80\u003e\r\n\r\n  DocumentRoot /var/www/nextcloud\r\n\r\n  \u003cDirectory /var/www/nextcloud/\u003e\r\n    Require all granted\r\n    Options FollowSymlinks MultiViews\r\n    AllowOverride All\r\n\r\n    \u003cIfModule mod_dav.c\u003e\r\n      Dav off\r\n    \u003c/IfModule\u003e\r\n\r\n    SetEnv HOME /var/www/nextcloud\r\n    SetEnv HTTP_HOME /var/www/nextcloud\r\n\r\n  \u003c/Directory\u003e\r\n\r\n  ErrorLog  /var/log/apache2/nextcloud_error.log\r\n  CustomLog /var/log/apache2/nextcloud_access.log combined\r\n\r\n\u003c/VirtualHost\u003e\r\nEOF\r\n--MIMEBOUNDARY\r\nContent-Transfer-Encoding: 7bit\r\nContent-Type: text/x-shellscript\r\nMime-Version: 1.0\r\n\r\n#!/bin/bash\r\n\r\n# Move nextcloud to its final destination and set permissions\r\nchown -R www-data:www-data nextcloud/\r\nmv nextcloud/ /var/www\r\n\r\n\r\n# Enable Apache modules. Replace default site\r\na2enmod rewrite\r\na2enmod headers\r\na2enmod env\r\na2enmod dir\r\na2enmod mime\r\n\r\na2dissite 000-default\r\na2ensite nextcloud\r\nsystemctl reload apache2\r\n--MIMEBOUNDARY--\r\n"
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "part"
              },
              {
                "type": "index",
                "value": {
                  "value": 2,
                  "type": "number"
                }
              },
              {
                "type": "get_attr",
                "value": "content"
              }
            ]
          ]
        }
      ]
    },
    {
      "module": "module.nextcloud",
      "mode": "managed",
      "type": "aws_instance",
      "name": "nextcloud_app",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "ami": "ami-0c3904e7363bbc4bc",
            "arn": "arn:aws:ec2:ap-northeast-3:594785396832:instance/i-09583fce4aff0b0e3",
            "associate_public_ip_address": true,
            "availability_zone": "ap-northeast-3c",
            "capacity_reservation_specification": [
              {
                "capacity_reservation_preference": "open",
                "capacity_reservation_target": []
              }
            ],
            "cpu_core_count": 1,
            "cpu_threads_per_core": 2,
            "credit_specification": [
              {
                "cpu_credits": "unlimited"
              }
            ],
            "disable_api_termination": false,
            "ebs_block_device": [],
            "ebs_optimized": false,
            "enclave_options": [
              {
                "enabled": false
              }
            ],
            "ephemeral_block_device": [],
            "get_password_data": false,
            "hibernation": false,
            "host_id": null,
            "iam_instance_profile": "",
            "id": "i-09583fce4aff0b0e3",
            "instance_initiated_shutdown_behavior": "stop",
            "instance_state": "running",
            "instance_type": "t3.medium",
            "ipv6_address_count": 0,
            "ipv6_addresses": [],
            "key_name": "",
            "launch_template": [],
            "metadata_options": [
              {
                "http_endpoint": "enabled",
                "http_put_response_hop_limit": 1,
                "http_tokens": "optional"
              }
            ],
            "monitoring": false,
            "network_interface": [
              {
                "delete_on_termination": false,
                "device_index": 0,
                "network_interface_id": "eni-0527e9c905e338284"
              },
              {
                "delete_on_termination": false,
                "device_index": 1,
                "network_interface_id": "eni-0b13fa18ebe39b177"
              }
            ],
            "outpost_arn": "",
            "password_data": "",
            "placement_group": "",
            "placement_partition_number": null,
            "primary_network_interface_id": "eni-0527e9c905e338284",
            "private_dns": "ip-10-0-1-5.ap-northeast-3.compute.internal",
            "private_ip": "10.0.1.5",
            "public_dns": "ec2-15-152-83-222.ap-northeast-3.compute.amazonaws.com",
            "public_ip": "15.152.83.222",
            "root_block_device": [
              {
                "delete_on_termination": true,
                "device_name": "/dev/sda1",
                "encrypted": false,
                "iops": 100,
                "kms_key_id": "",
                "tags": {},
                "throughput": 0,
                "volume_id": "vol-037e02adea789237f",
                "volume_size": 8,
                "volume_type": "gp2"
              }
            ],
            "secondary_private_ips": [],
            "security_groups": [],
            "source_dest_check": true,
            "subnet_id": "subnet-08cf1db4297937d95",
            "tags": {
              "Name": "nextcloud-app"
            },
            "tags_all": {
              "Name": "nextcloud-app"
            },
            "tenancy": "default",
            "timeouts": null,
            "user_data": "6829931bbced818d6c88871a7f0504e813e0d92c",
            "user_data_base64": null,
            "volume_tags": null,
            "vpc_security_group_ids": [
              "sg-0e820d21e1ea4576d"
            ]
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMCwidXBkYXRlIjo2MDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "module.database.aws_instance.nextcloud_db",
            "module.database.aws_key_pair.generated_key",
            "module.database.data.template_cloudinit_config.mariadb_init",
            "module.database.tls_private_key.example",
            "module.iam.aws_iam_access_key.nextcloud-s3-access_key",
            "module.iam.aws_iam_user.nextcloud-s3",
            "module.iam.data.aws_caller_identity.terraform_user",
            "module.networking.aws_eip.nat_eip",
            "module.networking.aws_eip.public_eip_nextcloud_app",
            "module.networking.aws_internet_gateway.gw",
            "module.networking.aws_nat_gateway.nextcloud_db_nat",
            "module.networking.aws_network_interface.private_eni_db_app",
            "module.networking.aws_network_interface.private_eni_nextcloud_app",
            "module.networking.aws_network_interface.private_eni_nextcloud_db_nat",
            "module.networking.aws_network_interface.public_eni_nextcloud_app",
            "module.networking.aws_route_table.nextcloud_app_public_rt",
            "module.networking.aws_route_table.nextcloud_db_route_table",
            "module.networking.aws_route_table_association.nextcloud_app_public_rt_assoc",
            "module.networking.aws_route_table_association.nextcloud_db_rt_assoc",
            "module.networking.aws_security_group.nextcloud_db_nat_sg",
            "module.networking.aws_security_group.nextcloud_private_db_app_sg",
            "module.networking.aws_security_group.nextcloud_public_app_sg",
            "module.networking.aws_subnet.nat_public_sn",
            "module.networking.aws_subnet.nextcloud_private_sn_app",
            "module.networking.aws_subnet.nextcloud_private_sn_db",
            "module.networking.aws_subnet.nextcloud_public_sn_app",
            "module.networking.aws_vpc.nextcloud_vpc",
            "module.nextcloud.data.template_cloudinit_config.cloudinit-nextcloud",
            "module.s3.aws_s3_bucket.nextcloud_s3_datastore",
            "module.s3.aws_s3_bucket_policy.nextcloud_s3_datastore_policy"
          ]
        }
      ]
    },
    {
      "module": "module.s3",
      "mode": "managed",
      "type": "aws_s3_bucket",
      "name": "nextcloud_s3_datastore",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "acceleration_status": "",
            "acl": "public-read-write",
            "arn": "arn:aws:s3:::testbucker-38123",
            "bucket": "testbucker-38123",
            "bucket_domain_name": "testbucker-38123.s3.amazonaws.com",
            "bucket_prefix": null,
            "bucket_regional_domain_name": "testbucker-38123.s3.ap-northeast-3.amazonaws.com",
            "cors_rule": [],
            "force_destroy": true,
            "grant": [],
            "hosted_zone_id": "Z2YQB5RD63NC85",
            "id": "testbucker-38123",
            "lifecycle_rule": [],
            "logging": [],
            "object_lock_configuration": [],
            "policy": null,
            "region": "ap-northeast-3",
            "replication_configuration": [],
            "request_payer": "BucketOwner",
            "server_side_encryption_configuration": [
              {
                "rule": [
                  {
                    "apply_server_side_encryption_by_default": [
                      {
                        "kms_master_key_id": "",
                        "sse_algorithm": "aws:kms"
                      }
                    ],
                    "bucket_key_enabled": false
                  }
                ]
              }
            ],
            "tags": {
              "Name": "Nextcloud_datastore"
            },
            "tags_all": {
              "Name": "Nextcloud_datastore"
            },
            "versioning": [
              {
                "enabled": false,
                "mfa_delete": false
              }
            ],
            "website": [],
            "website_domain": null,
            "website_endpoint": null
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.s3",
      "mode": "managed",
      "type": "aws_s3_bucket_policy",
      "name": "nextcloud_s3_datastore_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "bucket": "testbucker-38123",
            "id": "testbucker-38123",
            "policy": "{\n  \"Id\": \"NextcloudS3Policy\",\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"AllActions\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"s3:*\",\n      \"Resource\": [ \n          \"arn:aws:s3:::testbucker-38123\",\n          \"arn:aws:s3:::testbucker-38123/*\" \n        ],\n      \"Principal\": {\n        \"AWS\": [\n            \"arn:aws:iam::594785396832:user/terraform-nextcloud-s3\",\n            \"arn:aws:iam::594785396832:user/notsendo\"\n        ]\n      }\n    },\n    {\n      \"Sid\": \"DenyTheRest\",\n      \"Effect\": \"Deny\",\n      \"Action\": [\"s3:*\"],\n      \"Resource\": [ \"arn:aws:s3:::testbucker-38123\" ],\n      \"NotPrincipal\": {\n        \"AWS\": [\n            \"arn:aws:iam::594785396832:user/terraform-nextcloud-s3\",\n            \"arn:aws:iam::594785396832:user/notsendo\"\n        ]\n      }\n    }\n  ]\n}\n"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam.aws_iam_user.nextcloud-s3",
            "module.iam.data.aws_caller_identity.terraform_user",
            "module.s3.aws_s3_bucket.nextcloud_s3_datastore"
          ]
        }
      ]
    }
  ]
}
